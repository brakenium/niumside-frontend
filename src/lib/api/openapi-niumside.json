{"openapi":"3.0.3","info":{"title":"niumside-poptracker","description":"","license":{"name":""},"version":"0.1.0"},"paths":{"/api/population":{"get":{"tags":["api"],"operationId":"population","parameters":[{"name":"faction","in":"query","required":false,"schema":{"type":"array","items":{"type":"integer","format":"int32"},"nullable":true}},{"name":"loadout","in":"query","required":false,"schema":{"type":"array","items":{"type":"integer","format":"int32"},"nullable":true}},{"name":"team","in":"query","required":false,"schema":{"type":"array","items":{"type":"integer","format":"int32"},"nullable":true}},{"name":"world","in":"query","required":false,"schema":{"type":"array","items":{"type":"integer","format":"int32"},"nullable":true}},{"name":"zone","in":"query","required":false,"schema":{"type":"array","items":{"type":"integer","format":"int32"},"nullable":true}}],"responses":{"200":{"description":"Successful response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Response"}}}},"400":{"description":"Bad request","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"},"example":"NoDataAvailable"}}}}}},"/metrics/":{"get":{"tags":["crate"],"operationId":"prom_metrics","responses":{"200":{"description":"Successful response","content":{"text/plain":{"schema":{"type":"string"},"example":"# HELP realtime_messages_total_sent Total number of messages sent to Census stream\n# TYPE realtime_messages_total_sent counter\nrealtime_messages_total_sent 42\n\n# HELP realtime_total_pings Total number of ping messages sent to Census stream, may include errors\n# TYPE realtime_total_pings counter\nrealtime_total_pings 40\n\n# HELP realtime_messages_received_total_errored Total number of messages received from Census stream that errored\n# TYPE realtime_messages_received_total_errored counter\nrealtime_messages_received_total_errored 3\n\n# HELP niumside_process_loop_iterations The number of times the active player event process loop has ran\n# TYPE niumside_process_loop_iterations counter\nniumside_process_loop_iterations 1\n\n# HELP realtime_total_connections Total number of connections to Census stream\n# TYPE realtime_total_connections counter\nrealtime_total_connections 1\n\n# HELP realtime_messages_received_heartbeat Total number of heartbeat messages received from Census stream\n# TYPE realtime_messages_received_heartbeat counter\nrealtime_messages_received_heartbeat 1\n\n# HELP realtime_total_resubscriptions Total number of resubscriptions to Census stream\n# TYPE realtime_total_resubscriptions counter\nrealtime_total_resubscriptions 1\n\n# HELP realtime_messages_received_total Total number of messages received from Census stream\n# TYPE realtime_messages_received_total counter\nrealtime_messages_received_total 6438\n\n# HELP niumside_active_players_cleanups Number of times the active_players cleanup ran\n# TYPE niumside_active_players_cleanups counter\nniumside_active_players_cleanups 1\n\n# HELP niumside_gain_experience_events The number of gain experience events inserted into the active players\n# TYPE niumside_gain_experience_events counter\nniumside_gain_experience_events 6387\n\n# HELP niumside_active_players Number of active players\n# TYPE niumside_active_players gauge\nniumside_active_players 1064"}}}}}}},"components":{"schemas":{"Error":{"type":"string","enum":["NoDataAvailable"]},"PopFaction":{"type":"object","required":["faction_id","faction_population","teams"],"properties":{"faction_id":{"type":"integer","format":"int32"},"faction_population":{"type":"integer","format":"int32"},"teams":{"type":"array","items":{"$ref":"#/components/schemas/PopTeam"}}}},"PopLoadout":{"type":"object","required":["loadout_id","loadout_population"],"properties":{"loadout_id":{"type":"integer","format":"int32"},"loadout_population":{"type":"integer","format":"int32"}}},"PopTeam":{"type":"object","required":["team_id","team_population","loadouts"],"properties":{"loadouts":{"type":"array","items":{"$ref":"#/components/schemas/PopLoadout"}},"team_id":{"type":"integer","format":"int32"},"team_population":{"type":"integer","format":"int32"}}},"PopWorld":{"type":"object","required":["world_id","world_population","timestamp","zones"],"properties":{"timestamp":{"type":"string","format":"date-time"},"world_id":{"type":"integer","format":"int32"},"world_population":{"type":"integer","format":"int32"},"zones":{"type":"array","items":{"$ref":"#/components/schemas/PopZone"}}}},"PopZone":{"type":"object","required":["zone_id","zone_population","factions"],"properties":{"factions":{"type":"array","items":{"$ref":"#/components/schemas/PopFaction"}},"zone_id":{"type":"integer","format":"int32"},"zone_population":{"type":"integer","format":"int32"}}},"PossibleResults":{"oneOf":[{"type":"object","required":["pop"],"properties":{"pop":{"type":"array","items":{"$ref":"#/components/schemas/PopWorld"}}}},{"type":"object","required":["error"],"properties":{"error":{"$ref":"#/components/schemas/Error"}}}]},"Response":{"allOf":[{"$ref":"#/components/schemas/PossibleResults"},{"type":"object"}]}}}}